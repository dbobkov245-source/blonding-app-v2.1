(()=>{var a={};a.id=193,a.ids=[193,220,636],a.modules={361:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:a=>{"use strict";a.exports=require("react")},2326:a=>{"use strict";a.exports=require("react-dom")},2514:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h});var d=c(8732),e=c(2341),f=c.n(e);class g extends f(){render(){return(0,d.jsxs)(e.Html,{lang:"ru",children:[(0,d.jsxs)(e.Head,{children:[(0,d.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,d.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,d.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,d.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,d.jsx)("meta",{name:"apple-mobile-web-app-title",content:"Blonding App"}),(0,d.jsx)("meta",{name:"application-name",content:"Blonding App"}),(0,d.jsx)("meta",{name:"msapplication-TileColor",content:"#8b5cf6"}),(0,d.jsx)("meta",{name:"msapplication-config",content:"/browserconfig.xml"}),(0,d.jsx)("link",{rel:"apple-touch-icon",sizes:"192x192",href:"/icon-192x192.png"}),(0,d.jsx)("link",{rel:"apple-touch-icon",sizes:"512x512",href:"/icon-512x512.png"}),(0,d.jsx)("meta",{name:"theme-color",content:"#8b5cf6"})]}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.Main,{}),(0,d.jsx)(e.NextScript,{})]})]})}}let h=g},3873:a=>{"use strict";a.exports=require("path")},4075:a=>{"use strict";a.exports=require("zlib")},5347:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i});var d=c(8732);c(2015);var e=c(9918),f=c.n(e),g=c(4233);let h=({children:a})=>{let b=(0,g.useRouter)();return(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 text-gray-900",children:[(0,d.jsx)("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:(0,d.jsxs)("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex flex-col sm:flex-row gap-2 sm:gap-4 items-start sm:items-center justify-between",children:[(0,d.jsx)(f(),{href:"/",className:"font-bold text-lg sm:text-xl text-purple-600",children:"Blonding App v2.1"}),(0,d.jsxs)("div",{className:"flex gap-2 sm:gap-4 text-sm font-medium flex-wrap",children:[(0,d.jsx)(f(),{href:"/",className:`px-3 py-1 rounded-md hover:bg-purple-50 ${"/"===b.asPath?"text-purple-600 bg-purple-50":"text-gray-700"}`,children:"Теория"}),(0,d.jsx)(f(),{href:"/Assistant",className:`px-3 py-1 rounded-md hover:bg-purple-50 ${"/Assistant"===b.asPath?"text-purple-600 bg-purple-50":"text-gray-700"}`,children:"Голосовой помощник"}),(0,d.jsx)(f(),{href:"/Chat",className:`px-3 py-1 rounded-md hover:bg-purple-50 ${"/Chat"===b.asPath?"text-purple-600 bg-purple-50":"text-gray-700"}`,children:"AI-консультант"}),(0,d.jsx)(f(),{href:"/ChatRaw",className:`px-3 py-1 rounded-md hover:bg-purple-50 ${"/ChatRaw"===b.asPath?"text-purple-600 bg-purple-50":"text-gray-700"}`,children:"Чат с ИИ"})]})]})}),(0,d.jsx)("main",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:a}),(0,d.jsx)("footer",{className:"bg-white border-t mt-8 sm:mt-12",children:(0,d.jsxs)("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-4 sm:py-6 text-center text-sm text-gray-600",children:["Blonding App v2.1 • ",new Date().getFullYear()]})})]})};c(8754);let i=function({Component:a,pageProps:b}){return(0,d.jsx)(h,{children:(0,d.jsx)(a,{...b})})}},6060:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},6635:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>q,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>o,getStaticProps:()=>n,handler:()=>y,reportWebVitals:()=>r,routeModule:()=>x,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>u,unstable_getStaticPaths:()=>t,unstable_getStaticProps:()=>s});var e=c(3885),f=c(237),g=c(1413),h=c(2514),i=c(5347),j=c(9917),k=c(2289),l=a([j]);j=(l.then?(await l)():l)[0];let m=(0,g.M)(j,"default"),n=(0,g.M)(j,"getStaticProps"),o=(0,g.M)(j,"getStaticPaths"),p=(0,g.M)(j,"getServerSideProps"),q=(0,g.M)(j,"config"),r=(0,g.M)(j,"reportWebVitals"),s=(0,g.M)(j,"unstable_getStaticProps"),t=(0,g.M)(j,"unstable_getStaticPaths"),u=(0,g.M)(j,"unstable_getStaticParams"),v=(0,g.M)(j,"unstable_getServerProps"),w=(0,g.M)(j,"unstable_getServerSideProps"),x=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/Theory/[slug]",pathname:"/Theory/[slug]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:i.default,Document:h.default},userland:j}),y=(0,k.U)({srcPage:"/Theory/[slug]",config:q,userland:j,routeModule:x,getStaticPaths:o,getStaticProps:n,getServerSideProps:p});d()}catch(a){d(a)}})},7910:a=>{"use strict";a.exports=require("stream")},7981:a=>{"use strict";a.exports=import("react-markdown")},8732:a=>{"use strict";a.exports=require("react/jsx-runtime")},8754:()=>{},9021:a=>{"use strict";a.exports=require("fs")},9917:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>r,getStaticPaths:()=>p,getStaticProps:()=>q});var e=c(8732),f=c(9021),g=c.n(f),h=c(3873),i=c.n(h),j=c(2015),k=c(7981),l=c(9918),m=c.n(l),n=a([k]);k=(n.then?(await n)():n)[0];let o=({lessonTitle:a,lessonContent:b})=>{let[c,d]=(0,j.useState)([]),[f,g]=(0,j.useState)(""),[h,i]=(0,j.useState)(!1),[k,l]=(0,j.useState)(!1),m=(0,j.useRef)(null);(0,j.useEffect)(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[c]);let n=async(c=f)=>{if(!c.trim())return;let e=`Ты — AI-помощник по уроку "${a}". 
Отвечай на вопросы студента, используя ТОЛЬКО следующий контекст.
Не придумывай ничего, чего нет в тексте.

КОНТЕКСТ УРОКА:
${b.substring(0,4e3)}...`;d(a=>[...a,{role:"user",text:c}]),g(""),i(!0);try{let a=await fetch("/api/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:c,systemPrompt:e})});if(!a.ok){let b=await a.json();throw Error(b.error||`HTTP error ${a.status}`)}let b=await a.json();d(a=>[...a,{role:"assistant",text:b.reply||"Нет ответа"}])}catch(a){console.error("[LessonAIAssistant] Ошибка:",a),d(b=>[...b,{role:"assistant",text:`Ошибка AI: ${a.message}`}])}finally{i(!1)}};return(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border-2 border-purple-200 overflow-hidden",children:[(0,e.jsxs)("button",{onClick:()=>l(!k),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 flex items-center justify-between hover:from-purple-600 hover:to-pink-600 transition-colors",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD16"}),(0,e.jsxs)("div",{className:"text-left",children:[(0,e.jsx)("div",{className:"font-bold",children:"AI-помощник"}),(0,e.jsx)("div",{className:"text-xs opacity-90",children:"Задай вопрос по уроку"})]})]}),(0,e.jsx)("span",{className:`transform transition-transform ${k?"rotate-180":""}`,children:"▼"})]}),k&&(0,e.jsxs)("div",{className:"p-4",children:[0===c.length&&(0,e.jsxs)("div",{className:"mb-3 space-y-2",children:[(0,e.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:"Быстрые вопросы:"}),["\uD83D\uDCA1 Объясни проще","\uD83D\uDCD6 Приведи пример","\uD83C\uDFAF Дай инструкцию"].map((a,b)=>(0,e.jsx)("button",{onClick:()=>n(a),className:"w-full text-left px-3 py-2 bg-purple-50 hover:bg-purple-100 rounded-lg text-sm transition-colors",children:a},b))]}),(0,e.jsxs)("div",{className:"max-h-64 overflow-auto mb-3 space-y-2",children:[c.map((a,b)=>(0,e.jsxs)("div",{className:`p-3 rounded-lg text-sm ${"user"===a.role?"bg-blue-100 ml-4":"bg-gray-100 mr-4"}`,children:[(0,e.jsx)("div",{className:"font-semibold mb-1",children:"user"===a.role?"\uD83D\uDC64 Вы":"\uD83E\uDD16 AI"}),a.text]},b)),(0,e.jsx)("div",{ref:m})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),onKeyDown:a=>{"Enter"!==a.key||h||n()},placeholder:"Ваш вопрос...",className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,e.jsx)("button",{onClick:()=>n(),disabled:h||!f.trim(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg disabled:bg-gray-400 text-sm font-medium hover:bg-purple-600 transition-colors",children:h?"...":"\uD83D\uDCE4"})]})]})]})},p=async()=>{let a=[];try{let b=i().join(process.cwd(),"public","lessons","index.json"),c=g().readFileSync(b,"utf-8");a=JSON.parse(c)}catch(a){console.warn("index.json not found")}return{paths:a.map(a=>({params:{slug:a.slug}})),fallback:"blocking"}},q=async({params:a})=>{let{slug:b}=a;try{let a=decodeURIComponent(b),c=i().join(process.cwd(),"public","lessons",a,`${a}.md`);if(!g().existsSync(c))return console.warn(`Lesson file not found: ${c}`),{props:{lesson:null}};let d=g().readFileSync(c,"utf-8"),e=d.replace(/---[\s\S]*?---/,""),f=d.match(/title:\s*"([^"]+)"/);return{props:{lesson:{title:f?f[1]:a,content:e,slug:a}}}}catch(a){return console.error(`Error for slug: ${b}`,a.message),{props:{lesson:null}}}},r=({lesson:a})=>a?(0,e.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,e.jsxs)("div",{className:"flex-1 bg-white p-6 rounded-lg shadow-sm",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold mb-6",children:a.title}),(0,e.jsx)("article",{className:"prose prose-lg max-w-none",children:(0,e.jsx)(k.default,{children:a.content})}),(0,e.jsxs)("div",{className:"mt-8 p-6 bg-blue-50 rounded-lg text-center",children:[(0,e.jsx)("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Готовы проверить себя?"}),(0,e.jsx)("p",{className:"text-blue-800 mb-4",children:"Пройдите тест."}),(0,e.jsx)(m(),{href:`/Test/${a.slug}`,className:"inline-block px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow-lg",children:"Пройти тест"})]})]}),(0,e.jsxs)("div",{className:"lg:w-80 space-y-4",children:[(0,e.jsx)(o,{lessonTitle:a.title,lessonContent:a.content}),(0,e.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,e.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:"\uD83D\uDCA1 Подсказка"}),(0,e.jsx)("p",{className:"text-sm text-blue-800",children:"Используй AI для разбора урока."})]})]})]}):(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Урок не найден"}),(0,e.jsx)(m(),{href:"/",className:"text-blue-600 hover:underline",children:"Вернуться на главную"})]});d()}catch(a){d(a)}})}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[238,124,341,781],()=>b(b.s=6635));module.exports=c})();