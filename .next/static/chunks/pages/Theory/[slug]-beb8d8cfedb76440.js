(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{6366:(e,s,t)=>{"use strict";t.r(s),t.d(s,{__N_SSG:()=>c,default:()=>d});var l=t(7876),n=t(4232),r=t(9720),a=t(8230),o=t.n(a);let i=e=>{let{lessonTitle:s,lessonContent:t}=e,[r,a]=(0,n.useState)([]),[o,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[x,u]=(0,n.useState)(!1),m=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth"})},[r]);let h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if(!e.trim())return;let l='Ты — AI-помощник по уроку "'.concat(s,'". \nОтвечай на вопросы студента, используя ТОЛЬКО следующий контекст.\nНе придумывай ничего, чего нет в тексте.\n\nКОНТЕКСТ УРОКА:\n').concat(t.substring(0,4e3),"...");a(s=>[...s,{role:"user",text:e}]),i(""),d(!0);try{let s=await fetch("/api/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:e,systemPrompt:l})});if(!s.ok){let e=await s.json();throw Error(e.error||"HTTP error ".concat(s.status))}let t=await s.json();a(e=>[...e,{role:"assistant",text:t.reply||"Нет ответа"}])}catch(e){console.error("[LessonAIAssistant] Ошибка:",e),a(s=>[...s,{role:"assistant",text:"Ошибка AI: ".concat(e.message)}])}finally{d(!1)}};return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border-2 border-purple-200 overflow-hidden",children:[(0,l.jsxs)("button",{onClick:()=>u(!x),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 flex items-center justify-between hover:from-purple-600 hover:to-pink-600 transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD16"}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("div",{className:"font-bold",children:"AI-помощник"}),(0,l.jsx)("div",{className:"text-xs opacity-90",children:"Задай вопрос по уроку"})]})]}),(0,l.jsx)("span",{className:"transform transition-transform ".concat(x?"rotate-180":""),children:"▼"})]}),x&&(0,l.jsxs)("div",{className:"p-4",children:[0===r.length&&(0,l.jsxs)("div",{className:"mb-3 space-y-2",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:"Быстрые вопросы:"}),["\uD83D\uDCA1 Объясни проще","\uD83D\uDCD6 Приведи пример","\uD83C\uDFAF Дай инструкцию"].map((e,s)=>(0,l.jsx)("button",{onClick:()=>h(e),className:"w-full text-left px-3 py-2 bg-purple-50 hover:bg-purple-100 rounded-lg text-sm transition-colors",children:e},s))]}),(0,l.jsxs)("div",{className:"max-h-64 overflow-auto mb-3 space-y-2",children:[r.map((e,s)=>(0,l.jsxs)("div",{className:"p-3 rounded-lg text-sm ".concat("user"===e.role?"bg-blue-100 ml-4":"bg-gray-100 mr-4"),children:[(0,l.jsx)("div",{className:"font-semibold mb-1",children:"user"===e.role?"\uD83D\uDC64 Вы":"\uD83E\uDD16 AI"}),e.text]},s)),(0,l.jsx)("div",{ref:m})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||c||h()},placeholder:"Ваш вопрос...",className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,l.jsx)("button",{onClick:()=>h(),disabled:c||!o.trim(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg disabled:bg-gray-400 text-sm font-medium hover:bg-purple-600 transition-colors",children:c?"...":"\uD83D\uDCE4"})]})]})]})};var c=!0;let d=e=>{let{lesson:s}=e;return s?(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,l.jsxs)("div",{className:"flex-1 bg-white p-6 rounded-lg shadow-sm",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:s.title}),(0,l.jsx)("article",{className:"prose prose-lg max-w-none",children:(0,l.jsx)(r.o,{children:s.content})}),(0,l.jsxs)("div",{className:"mt-8 p-6 bg-blue-50 rounded-lg text-center",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Готовы проверить себя?"}),(0,l.jsx)("p",{className:"text-blue-800 mb-4",children:"Пройдите тест."}),(0,l.jsx)(o(),{href:"/Test/".concat(s.slug),className:"inline-block px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow-lg",children:"Пройти тест"})]})]}),(0,l.jsxs)("div",{className:"lg:w-80 space-y-4",children:[(0,l.jsx)(i,{lessonTitle:s.title,lessonContent:s.content}),(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:"\uD83D\uDCA1 Подсказка"}),(0,l.jsx)("p",{className:"text-sm text-blue-800",children:"Используй AI для разбора урока."})]})]})]}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Урок не найден"}),(0,l.jsx)(o(),{href:"/",className:"text-blue-600 hover:underline",children:"Вернуться на главную"})]})}},8e3:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Theory/[slug]",function(){return t(6366)}])}},e=>{e.O(0,[720,636,593,792],()=>e(e.s=8e3)),_N_E=e.O()}]);